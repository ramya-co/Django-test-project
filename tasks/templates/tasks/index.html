{% extends "tasks/base.html" %}

{% block content %}
<h1>ðŸ“‹ My To-Do List</h1>

<div style="text-align: center; margin-bottom: 10px;">
    <a href="{% url 'export_tasks_csv' %}" style="color: #667eea; text-decoration: none; font-weight: 500;">ðŸ“¥ Export as CSV</a>
    &nbsp;|&nbsp;
    <a href="{% url 'task_stats' %}" style="color: #667eea; text-decoration: none; font-weight: 500;">ðŸ“Š Task Stats</a>
</div>

<form method="post" action="{% url 'add_task' %}" class="add-task-form">
    {% csrf_token %}
    <input type="text" name="title" placeholder="Add a new task..." required>
    <button type="submit">Add Task</button>
</form>

{% if tasks %}
<ul class="task-list">
    {% for task in tasks %}
    <li class="task-item {% if task.completed %}completed{% endif %}">
        <span class="task-title">{{ task.title }}</span>
        <div class="task-actions">
            <form method="post" action="{% url 'toggle_task' task.id %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-toggle">
                    {% if task.completed %}Undo{% else %}Done{% endif %}
                </button>
            </form>
            <form method="post" action="{% url 'delete_task' task.id %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-delete">Delete</button>
            </form>
            <a href="{% url 'edit_task' task.id %}" class="btn" style="background: #667eea; color: white; text-decoration: none;">Edit</a>
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<div class="empty-state">
    <p>No tasks yet. Add one above to get started!</p>
</div>
{% endif %}
{% endblock %}
